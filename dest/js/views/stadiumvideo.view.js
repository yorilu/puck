define(["backbone","text!../templates/stadiumvideo.tpl.html","puck","baseview","modelFactory","videoPlayer"],function(e,t,n,r,i,s){var o=i.get("getStadiumOverview");return view=r.extend({events:{"click #filterBtn":"showSelectLayer","click #closeBtn":"closeSelectLayer","click #j_stadium_info_select_ul":"filterSearch","click #j_stadium_video_wrapper":"playVideo"},firstEnter:!0,sportTypes:[],reqParam:{clientId:"h5"},player:null,onInit:function(){this.tplFun=_.template(t),this.player=new MediaElementPlayer("#js_main_video",{features:["playpause","progress","current","fullscreen","titlebar"]})},onShow:function(e){if(!this.firstEnter)return;var t=e.data;this.firstEnter=!1,this.sportTypes=t.sportType.split(","),this.reqParam.stadiumId=t.id,this.sendRequest(this.reqParam,this.render)},onHide:function(){},sendRequest:function(e,t){var n=this;o.$post({data:e,success:function(e){var r=e.data;r.sportTypes=n.sportTypes,t.apply(n,[r])},error:function(){}})},render:function(e){var t=this.tplFun(e);this.$el.html(t),this.els={selectLayer:this.$el.find("#j_stadium_info_select_layer")}},showSelectLayer:function(){$("body").css("overflow","hidden"),this.els.selectLayer.show()},closeSelectLayer:function(){$("body").css("overflow","auto"),this.els.selectLayer.hide()},filterSearch:function(e){var t=$(e.target).parent().parent(),n=t.data("sporttype");this.reqParam.sportType=n,this.sendRequest(this.reqParam,this.render)},playVideo:function(e){var t=$(e.target),n=t.data("path"),r=t.data("title");n&&(this.player.setSrc(n),this.player.setTitle(r),this.player.play(),this.player.enterFullScreen())}}),view})