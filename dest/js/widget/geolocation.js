define([],function(){var e=window.navigator.geolocation,t={},n=function(n){t={onPosComplete:n&&n.onPosComplete?n.onPosComplete:null,onComplete:n&&n.onComplete?n.onComplete:null,onError:n&&n.onError?n.onError:null};var n={enableHighAcuracy:!0,timeout:3e3},i=function(e){r(e.coords)},s=function(e){t.onError&&t.onError("定位失败")};e.getCurrentPosition(i,s,n)},r=function(e,n){var r="vH2zoCtOoS5QCx1Wjtn2dG6C",s="http://api.map.baidu.com/geoconv/v1/";s=s+"?coords="+e.longitude+","+e.latitude+"&ak="+r+"&callback=?",$.ajax({type:"get",url:s,dataType:"jsonp",success:function(e){if(e.status==0){var n=e.result[0],r={longitude:n.x,latitude:n.y};t.onPosComplete&&t.onPosComplete(r.latitude,r.longitude),i(r.latitude,r.longitude)}else t.onError&&t.onError("定位失败")},error:function(e,n){t.onError&&t.onError("定位失败")}})},i=function(e,n){var r="vH2zoCtOoS5QCx1Wjtn2dG6C",i="http://api.map.baidu.com/geocoder/v2/?";i=i+"ak="+r+"&callback=renderReverse&location="+e+","+n+"&output=json&pois=1",console.log(i),$.ajax({type:"get",url:i,dataType:"jsonp",success:function(e){t.onComplete&&t.onComplete(e)},error:function(e,n){t.onError&&t.onError("地址解析失败")}})},s={getCurrentPosition:n};return s})