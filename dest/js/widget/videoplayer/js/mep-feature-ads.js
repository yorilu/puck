(function(e){e("head").append(e("<style>.mejs-ads a {	display: block; 	position: absolute;	right: 0;	top: 0;	width: 100%; 	height: 100%; 	display: block; }.mejs-ads .mejs-ads-skip-block {	display: block; 	position: absolute;	right: 0;	top: 0;	padding: 10px; 	background: #000; 	background: rgba(0,0,0,0.5); 	color: #fff; }.mejs-ads .mejs-ads-skip-button {	cursor: pointer; }.mejs-ads .mejs-ads-skip-button:hover {	text-decoration: underline; }</style>")),e.extend(mejs.MepDefaults,{adsPrerollMediaUrl:"",adsPrerollAdUrl:"",adsPrerollAdEnableSkip:!1,adsPrerollAdSkipSeconds:-1}),e.extend(MediaElementPlayer.prototype,{adsLoaded:!1,adsDataIsLoading:!1,adsCurrentMediaUrl:"",adsCurrentMediaDuration:0,adsPlayerHasStarted:!1,buildads:function(t,n,r,i){var s=this;if(s.adsLoaded)return;s.adsLoaded=!0,t.adsLayer=e('<div class="mejs-layer mejs-overlay mejs-ads"><a href="#" target="_blank">&nbsp;</a><div class="mejs-ads-skip-block"><span class="mejs-ads-skip-message"></span><span class="mejs-ads-skip-button">Skip Ad &raquo;</span></div></div>').insertBefore(r.find(".mejs-overlay-play")).hide(),t.adsLayer.find("a").on("click",e.proxy(s.adsAdClick,s)),t.adsSkipBlock=t.adsLayer.find(".mejs-ads-skip-block").hide(),t.adsSkipMessage=t.adsLayer.find(".mejs-ads-skip-message").hide(),t.adsSkipButton=t.adsLayer.find(".mejs-ads-skip-button").on("click",e.proxy(s.adsSkipClick,s)),s.adsMediaTryingToStartProxy=e.proxy(s.adsMediaTryingToStart,s),s.adsPrerollStartedProxy=e.proxy(s.adsPrerollStarted,s),s.adsPrerollMetaProxy=e.proxy(s.adsPrerollMeta,s),s.adsPrerollUpdateProxy=e.proxy(s.adsPrerollUpdate,s),s.adsPrerollEndedProxy=e.proxy(s.adsPrerollEnded,s),s.media.addEventListener("play",s.adsMediaTryingToStartProxy),s.media.addEventListener("playing",s.adsMediaTryingToStartProxy),s.media.addEventListener("canplay",s.adsMediaTryingToStartProxy),s.media.addEventListener("loadedmetadata",s.adsMediaTryingToStartProxy),console.log("setup ads",s.options.adsPrerollMediaUrl),s.options.adsPrerollMediaUrl!=""&&s.adsStartPreroll()},adsMediaTryingToStart:function(){var e=this;e.adsDataIsLoading&&!e.media.paused&&e.media.pause(),e.adsPlayerHasStarted=!0},adsStartPreroll:function(){var e=this;console.log("adsStartPreroll","url",e.options.adsPrerollMediaUrl),e.media.addEventListener("loadedmetadata",e.adsPrerollMetaProxy),e.media.addEventListener("playing",e.adsPrerollStartedProxy),e.media.addEventListener("ended",e.adsPrerollEndedProxy),e.media.addEventListener("timeupdate",e.adsPrerollUpdateProxy),e.adsCurrentMediaUrl=e.media.src,e.adsCurrentMediaDuration=e.media.duration,e.media.setSrc(e.options.adsPrerollMediaUrl),e.media.load(),e.adsPlayerHasStarted&&e.media.play()},adsPrerollMeta:function(){var e=this,t=0;console.log("loadedmetadata",e.media.duration,e.adsCurrentMediaDuration),e.options.duration>0?t=e.options.duration:isNaN(e.adsCurrentMediaDuration)||(t=e.adsCurrentMediaDuration),setTimeout(function(){e.controls.find(".mejs-duration").html(mejs.Utility.secondsToTimeCode(t,e.options.alwaysShowHours||t>3600,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))},250)},adsPrerollStarted:function(){console.log("adsPrerollStarted");var e=this;e.media.removeEventListener("playing",e.adsPrerollStartedProxy),e.disableControls(),e.hideControls(),e.options.adsPrerollAdUrl!=""&&(e.adsLayer.show(),e.adsLayer.find("a").attr("href",e.options.adsPrerollAdUrl)),e.options.adsPrerollAdEnableSkip?(e.adsSkipBlock.show(),e.options.adsPrerollAdSkipSeconds>0?(e.adsSkipMessage.html("Skip in "+e.options.adsPrerollAdSkipSeconds.toString()+" seconds.").show(),e.adsSkipButton.hide()):(e.adsSkipMessage.hide(),e.adsSkipButton.show())):e.adsSkipBlock.hide(),e.container.trigger("mejsprerollstarted")},adsPrerollUpdate:function(){var e=this;e.options.adsPrerollAdEnableSkip&&e.options.adsPrerollAdSkipSeconds>0&&(e.media.currentTime>e.options.adsPrerollAdSkipSeconds?(e.adsSkipButton.show(),e.adsSkipMessage.hide()):e.adsSkipMessage.html("Skip in "+Math.round(e.options.adsPrerollAdSkipSeconds-e.media.currentTime).toString()+" seconds.")),e.container.trigger("mejsprerolltimeupdate")},adsPrerollEnded:function(){console.log("adsPrerollEnded");var e=this;e.container.trigger("mejsprerollended"),e.adRestoreMainMedia()},adRestoreMainMedia:function(){console.log("adRestoreMainMedia",this.adsCurrentMediaUrl);var e=this;e.media.setSrc(e.adsCurrentMediaUrl),setTimeout(function(){e.media.load(),e.media.play()},10),e.enableControls(),e.showControls(),e.adsLayer.hide(),e.media.removeEventListener("ended",e.adsPrerollEndedProxy),e.media.removeEventListener("loadedmetadata",e.adsPrerollMetaProxy),e.media.removeEventListener("timeupdate",e.adsPrerollUpdateProxy),e.container.trigger("mejsprerollmainstarted")},adsAdClick:function(e){console.log("adsAdClicked");var t=this;t.media.paused?t.media.play():t.media.pause(),t.container.trigger("mejsprerolladsclicked")},adsSkipClick:function(){console.log("adsSkipClick");var e=this;e.container.trigger("mejsprerollskipclicked"),e.container.trigger("mejsprerollended"),e.adRestoreMainMedia()},adsLoadUrl:function(e){console.log("adsLoadUrl",e);var t=new Image,n=Math.round(Math.random()*1e5);t.src=e+(e.indexOf("?")>0?"&":"?")+"random"+n+"="+n,t.loaded=function(){t=null}}})})(mejs.$)