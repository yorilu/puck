(function(e){e.extend(mejs.MepDefaults,{progessHelpText:mejs.i18n.t("Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.")}),e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,n,r,i){e('<div class="mejs-time-rail"><span  class="mejs-time-total mejs-time-slider"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></div>').appendTo(n),n.find(".mejs-time-buffering").hide();var s=this,o=n.find(".mejs-time-total"),u=n.find(".mejs-time-loaded"),a=n.find(".mejs-time-current"),f=n.find(".mejs-time-handle"),l=n.find(".mejs-time-float"),c=n.find(".mejs-time-float-current"),h=n.find(".mejs-time-slider"),p=function(e){var t=o.offset(),n=o.outerWidth(!0),r=0,s=0,u=0,a;e.originalEvent.changedTouches?a=e.originalEvent.changedTouches[0].pageX:a=e.pageX,i.duration&&(a<t.left?a=t.left:a>n+t.left&&(a=n+t.left),u=a-t.left,r=u/n,s=r<=.02?0:r*i.duration,d&&s!==i.currentTime&&i.setCurrentTime(s),mejs.MediaFeatures.hasTouch||(l.css("left",u),c.html(mejs.Utility.secondsToTimeCode(s)),l.show()))},d=!1,v=!1,m=0,g=!1,y=t.options.autoRewind,b=function(e){var t=i.currentTime,n=mejs.i18n.t("Time Slider"),r=mejs.Utility.secondsToTimeCode(t),s=i.duration;h.attr({"aria-label":n,"aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":t,"aria-valuetext":r,role:"slider",tabindex:0})},w=function(){var e=new Date;e-m>=1e3&&i.play()};h.bind("focus",function(e){t.options.autoRewind=!1}),h.bind("blur",function(e){t.options.autoRewind=y}),h.bind("keydown",function(e){new Date-m>=1e3&&(g=i.paused);var t=e.keyCode,n=i.duration,r=i.currentTime;switch(t){case 37:r-=1;break;case 39:r+=1;break;case 38:r+=Math.floor(n*.1);break;case 40:r-=Math.floor(n*.1);break;case 36:r=0;break;case 35:r=n;break;case 10:i.paused?i.play():i.pause();return;case 13:i.paused?i.play():i.pause();return;default:return}return r=r<0?0:r>=n?n:Math.floor(r),m=new Date,g||i.pause(),r<i.duration&&!g&&setTimeout(w,1100),i.setCurrentTime(r),e.preventDefault(),e.stopPropagation(),!1}),o.bind("mousedown touchstart",function(e){if(e.which===1||e.which===0)d=!0,p(e),s.globalBind("mousemove.dur touchmove.dur",function(e){p(e)}),s.globalBind("mouseup.dur touchend.dur",function(e){d=!1,l.hide(),s.globalUnbind(".dur")})}).bind("mouseenter",function(e){v=!0,s.globalBind("mousemove.dur",function(e){p(e)}),mejs.MediaFeatures.hasTouch||l.show()}).bind("mouseleave",function(e){v=!1,d||(s.globalUnbind(".dur"),l.hide())}),i.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),i.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e),b(e)},!1),s.loaded=u,s.total=o,s.current=a,s.handle=f},setProgressRail:function(e){var t=this,n=e!==undefined?e.target:t.media,r=null;n&&n.buffered&&n.buffered.length>0&&n.buffered.end&&n.duration?r=n.buffered.end(0)/n.duration:n&&n.bytesTotal!==undefined&&n.bytesTotal>0&&n.bufferedBytes!==undefined?r=n.bufferedBytes/n.bytesTotal:e&&e.lengthComputable&&e.total!==0&&(r=e.loaded/e.total),r!==null&&(r=Math.min(1,Math.max(0,r)),t.loaded&&t.total&&t.loaded.width(t.total.width()*r))},setCurrentRail:function(){var e=this;if(e.media.currentTime!==undefined&&e.media.duration&&e.total&&e.handle){var t=Math.round(e.total.width()*e.media.currentTime/e.media.duration),n=t-Math.round(e.handle.outerWidth(!0)/2);e.current.width(t),e.handle.css("left",n)}}})})(mejs.$)