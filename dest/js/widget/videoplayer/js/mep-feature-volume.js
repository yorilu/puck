(function(e){e.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),allyVolumeControlText:mejs.i18n.t("Use Up/Down Arrow keys to increase or decrease volume."),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,n,r,i){if((mejs.MediaFeatures.isAndroid||mejs.MediaFeatures.isiOS)&&this.options.hideVolumeOnTouchDevices)return;var s=this,o=s.isVideo?s.options.videoVolume:s.options.audioVolume,u=o=="horizontal"?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'" aria-label="'+s.options.muteText+'"></button>'+"</div>"+'<a href="javascript:void(0);" class="mejs-horizontal-volume-slider">'+'<span class="mejs-offscreen">'+s.options.allyVolumeControlText+"</span>"+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+"</a>").appendTo(n):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'" aria-label="'+s.options.muteText+'"></button>'+'<a href="javascript:void(0);" class="mejs-volume-slider">'+'<span class="mejs-offscreen">'+s.options.allyVolumeControlText+"</span>"+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+"</a>"+"</div>").appendTo(n),a=s.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),f=s.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),l=s.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),c=s.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),h=function(e,t){if(!a.is(":visible")&&typeof t=="undefined"){a.show(),h(e,!0),a.hide();return}e=Math.max(0,e),e=Math.min(e,1),e===0?u.removeClass("mejs-mute").addClass("mejs-unmute"):u.removeClass("mejs-unmute").addClass("mejs-mute");var n=f.position();if(o=="vertical"){var r=f.height(),i=r-r*e;c.css("top",Math.round(n.top+i-c.height()/2)),l.height(r-i),l.css("top",n.top+i)}else{var s=f.width(),p=s*e;c.css("left",Math.round(n.left+p-c.width()/2)),l.width(Math.round(p))}},p=function(e){var t=null,n=f.offset();if(o==="vertical"){var r=f.height(),s=parseInt(f.css("top").replace(/px/,""),10),u=e.pageY-n.top;t=(r-u)/r;if(n.top===0||n.left===0)return}else{var a=f.width(),l=e.pageX-n.left;t=l/a}t=Math.max(0,t),t=Math.min(t,1),h(t),t===0?i.setMuted(!0):i.setMuted(!1),i.setVolume(t)},d=!1,v=!1;u.hover(function(){a.show(),v=!0},function(){v=!1,!d&&o=="vertical"&&a.hide()});var m=function(e){var t=Math.floor(i.volume*100);a.attr({"aria-label":mejs.i18n.t("volumeSlider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t,"aria-valuetext":t+"%",role:"slider",tabindex:0})};a.bind("mouseover",function(){v=!0}).bind("mousedown",function(e){return p(e),s.globalBind("mousemove.vol",function(e){p(e)}),s.globalBind("mouseup.vol",function(){d=!1,s.globalUnbind(".vol"),!v&&o=="vertical"&&a.hide()}),d=!0,!1}).bind("keydown",function(e){var t=e.keyCode,n=i.volume;switch(t){case 38:n+=.1;break;case 40:n-=.1;break;default:return!0}return d=!1,h(n),i.setVolume(n),!1}).bind("blur",function(){a.hide()}),u.find("button").click(function(){i.setMuted(!i.muted)}),u.find("button").bind("focus",function(){a.show()}),i.addEventListener("volumechange",function(e){d||(i.muted?(h(0),u.removeClass("mejs-mute").addClass("mejs-unmute")):(h(i.volume),u.removeClass("mejs-unmute").addClass("mejs-mute"))),m(e)},!1),s.container.is(":visible")&&(h(t.options.startVolume),t.options.startVolume===0&&i.setMuted(!0),i.pluginType==="native"&&i.setVolume(t.options.startVolume))}})})(mejs.$)